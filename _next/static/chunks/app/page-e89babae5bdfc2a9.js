(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{233:(e,t,a)=>{Promise.resolve().then(a.bind(a,424))},424:(e,t,a)=>{"use strict";a.d(t,{default:()=>z});var r=a(5155),n=a(2115),i=a(8567);function s(e){let t,{commit:a,isSelected:s,isBranchHead:o,isCurrentBranchHead:d,onSelect:l,onCommitDrop:c}=e,[m,h]=(0,n.useState)(!1);t=a.isCustom?"fill-custom-commit":d?"fill-accent":o?"fill-primary":"fill-secondary";let u=s?"stroke-accent":"stroke-primary",p=s?2:1;return m&&(u="stroke-blue-500",p=3),(0,r.jsxs)("g",{transform:"translate(".concat(a.x,", ").concat(a.y,")"),onClick:()=>l(a.id),className:"cursor-pointer group","aria-label":"Commit ID ".concat(a.id),draggable:!0,onDragStart:e=>{e.dataTransfer.setData("application/x-git-commit-id",a.id),e.dataTransfer.effectAllowed="move"},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},onDragEnter:e=>{e.preventDefault(),e.dataTransfer.types.includes("application/x-git-commit-id")&&h(!0)},onDragLeave:e=>{e.preventDefault(),h(!1)},onDrop:e=>{e.preventDefault(),h(!1);let t=e.dataTransfer.getData("application/x-git-commit-id"),r=a.id;t&&t!==r?c(t,r):t===r&&console.warn("Attempted to drop a commit on itself.")},children:[(0,r.jsx)("circle",{cx:0,cy:0,r:12,className:"".concat(t," ").concat(u," transition-all duration-150 group-hover:opacity-80"),strokeWidth:p}),(0,r.jsx)("g",{transform:"translate(-8 -8)",children:(0,r.jsx)(i.A,{className:"text-primary-foreground",width:16,height:16})}),(0,r.jsx)("title",{children:"Commit: ".concat(a.id)})]})}function o(e){let{branch:t,headCommitPosition:a,isSelected:n,onSelect:i}=e;return(0,r.jsxs)("g",{transform:"translate(".concat(a.x,", ").concat(a.y+30,")"),onClick:()=>i(t.name),className:"cursor-pointer group","aria-label":"Branch ".concat(t.name),children:[(0,r.jsx)("rect",{x:-40,y:-15,width:80,height:24,rx:5,ry:5,className:"".concat(n?"fill-accent/20":"fill-primary/10"," stroke-primary/50 group-hover:fill-primary/20 transition-colors duration-300")}),(0,r.jsx)("text",{textAnchor:"middle",className:"".concat(n?"fill-accent":"fill-primary"," ").concat(n?"font-bold":"font-medium"," text-sm select-none"),children:t.name}),(0,r.jsx)("title",{children:"Branch: ".concat(t.name)})]})}let d="arrow-marker";function l(e){let{commits:t,branches:a,positionedCommits:n,edges:i,selectedCommitId:l,selectedBranchName:c,onCommitSelect:m,onBranchSelect:h,onCommitDrop:u,height:p,width:f}=e;if(!n.length)return(0,r.jsx)("div",{className:"text-center p-8 text-muted-foreground",children:"No commits to display."});let x=Object.fromEntries(Object.values(a).map(e=>[e.name,e.headCommitId])),g=e=>Object.values(x).includes(e);return(0,r.jsx)("div",{className:"w-full h-full overflow-auto border rounded-md shadow-lg bg-card",children:(0,r.jsxs)("svg",{width:f,height:p,className:"min-w-full min-h-full",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("marker",{id:d,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",children:(0,r.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",className:"fill-primary"})})}),(0,r.jsx)("g",{children:i.map((e,t)=>{let a=e.from.parentIds.length>1&&e.to.id===e.from.parentIds[1];return(0,r.jsx)("line",{x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y,className:"transition-all duration-300 ".concat(a?"stroke-accent":"stroke-primary/70"),strokeWidth:"2",markerEnd:"url(#".concat(d,")")},"edge-".concat(t,"-").concat(e.from.id,"-").concat(e.to.id))})}),(0,r.jsx)("g",{children:n.map(e=>{var t;return(0,r.jsx)(s,{commit:e,isSelected:l===e.id,isBranchHead:g(e.id),isCurrentBranchHead:!!c&&(null===(t=a[c])||void 0===t?void 0:t.headCommitId)===e.id,onSelect:m,onCommitDrop:u},e.id)})}),(0,r.jsx)("g",{children:Object.values(a).map(e=>{let t=n.find(t=>t.id===e.headCommitId);return t?(0,r.jsx)(o,{branch:e,headCommitPosition:{x:t.x,y:t.y},isSelected:c===e.name,onSelect:h},e.name):null})})]})})}var c=a(9708),m=a(2085),h=a(9434);let u=(0,m.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:s=!1,...o}=e,d=s?c.DX:"button";return(0,r.jsx)(d,{className:(0,h.cn)(u({variant:n,size:i,className:a})),ref:t,...o})});p.displayName="Button";var f=a(4868),x=a(8847),g=a(5844),v=a(1949),b=a(8191),j=a(6919),C=a(9556),N=a(7381),y=a(518);let w=j.bL;j.YJ;let I=j.WT,k=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsxs)(j.l9,{ref:t,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[n,(0,r.jsx)(j.In,{asChild:!0,children:(0,r.jsx)(C.A,{className:"h-4 w-4 opacity-50"})})]})});k.displayName=j.l9.displayName;let S=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(j.PP,{ref:t,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})});S.displayName=j.PP.displayName;let A=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(j.wn,{ref:t,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(C.A,{className:"h-4 w-4"})})});A.displayName=j.wn.displayName;let D=n.forwardRef((e,t)=>{let{className:a,children:n,position:i="popper",...s}=e;return(0,r.jsx)(j.ZL,{children:(0,r.jsxs)(j.UC,{ref:t,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...s,children:[(0,r.jsx)(S,{}),(0,r.jsx)(j.LM,{className:(0,h.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(A,{})]})})});D.displayName=j.UC.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(j.JU,{ref:t,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=j.JU.displayName;let E=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsxs)(j.q7,{ref:t,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(j.VF,{children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})}),(0,r.jsx)(j.p4,{children:n})]})});E.displayName=j.q7.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(j.wv,{ref:t,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=j.wv.displayName;let M=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});M.displayName="Card";let T=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("flex flex-col space-y-1.5 p-6",a),...n})});T.displayName="CardHeader";let O=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});O.displayName="CardTitle";let B=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("text-sm text-muted-foreground",a),...n})});B.displayName="CardDescription";let _=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("p-6 pt-0",a),...n})});function L(e){let{selectedBranchName:t,selectedCommitId:a,commits:s,branches:o,onAddCommit:d,onCreateBranch:l,onMoveCommit:c,onMergeBranch:m,onAddCustomCommits:h,isMoveModeActive:u,toggleMoveMode:j}=e,[C,N]=(0,n.useState)(null),y=Object.values(s).filter(e=>e.id!==a),S=t&&a&&s[a]?Object.keys(o).filter(e=>{var r;return e!==t&&!(null===(r=s[a])||void 0===r?void 0:r.parentIds.includes(o[e].headCommitId))}):[];return(0,r.jsxs)(M,{className:"p-4 shadow-md",children:[(0,r.jsxs)(T,{children:[(0,r.jsx)(O,{children:"Git Actions"}),(0,r.jsx)(B,{children:"Perform operations on the Git graph. You can also drag-and-drop commits to move them."})]}),(0,r.jsxs)(_,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(p,{onClick:d,disabled:!t||u,"aria-label":"Add new commit to selected branch",variant:"outline",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"})," Add Commit"]}),(0,r.jsxs)(p,{onClick:l,disabled:!a||u,"aria-label":"Create new branch from selected commit",variant:"outline",children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Create Branch"]}),(0,r.jsxs)(p,{onClick:j,disabled:!a,variant:u?"destructive":"outline","aria-label":u?"Cancel Move Commit (or use drag-and-drop)":"Initiate Move Commit (or use drag-and-drop)",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," ",u?"Cancel Move":"Move Commit"]}),(0,r.jsxs)(p,{onClick:h,disabled:!a||u,"aria-label":"Create new branch with 4 custom commits from selected commit",variant:"outline",children:[(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Apply Customisations"]})]}),u&&a&&(0,r.jsxs)("div",{className:"p-4 border rounded-md bg-secondary/50",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-secondary-foreground mb-2",children:[(0,r.jsx)(v.A,{className:"inline mr-2 h-4 w-4 text-amber-500"}),"Moving commit: ",(0,r.jsx)("span",{className:"font-bold",children:a}),". Select new parent:"]}),(0,r.jsxs)(w,{onValueChange:e=>{a&&e!==a&&c(a,e)},disabled:0===y.length||!a,children:[(0,r.jsx)(k,{className:"w-full",children:(0,r.jsx)(I,{placeholder:"Select target parent commit..."})}),(0,r.jsxs)(D,{children:[y.map(e=>(0,r.jsxs)(E,{value:e.id,children:["Commit ID: ",e.id]},e.id)),0===y.length&&(0,r.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"No other commits available to be parent."})]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Note: Moving commits can simplify or alter history. This is a basic re-parenting operation. Alternatively, try dragging the commit."})]}),!u&&t&&(0,r.jsxs)("div",{className:"p-4 border rounded-md bg-secondary/50 mt-4",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-secondary-foreground mb-2",children:["Merge into ",(0,r.jsx)("span",{className:"font-bold",children:t}),":"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(w,{onValueChange:N,value:C||"",disabled:0===S.length,children:[(0,r.jsx)(k,{className:"flex-grow",children:(0,r.jsx)(I,{placeholder:"Select source branch to merge..."})}),(0,r.jsxs)(D,{children:[S.map(e=>(0,r.jsxs)(E,{value:e,children:[e," (Head: ",o[e].headCommitId,")"]},e)),0===S.length&&(0,r.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"No other branches available to merge."})]})]}),(0,r.jsxs)(p,{onClick:()=>{C&&(m(C),N(null))},disabled:!C||!t,"aria-label":"Merge branch ".concat(C||""," into ").concat(t),children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Merge"]})]})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground pt-2",children:[t&&(0,r.jsxs)("p",{children:["Selected Branch: ",(0,r.jsx)("span",{className:"font-semibold text-primary",children:t})]}),a&&(0,r.jsxs)("p",{children:["Selected Commit ID: ",(0,r.jsx)("span",{className:"font-semibold text-accent",children:a})]})]})]})]})}_.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,h.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter";var P=a(7481);let R="master";function H(e,t){let a={...e},r={...t},n=Object.values(r).filter(e=>e.name!==R).map(e=>({branchName:e.name,...function(e,t){let a=t[e.headCommitId];if(!a)return{forkParentDepth:-1,headTimestamp:0};if(a.parentIds.length>0){let e=t[a.parentIds[0]];return{forkParentDepth:e?e.depth:a.depth>0?a.depth-1:-1,headTimestamp:a.timestamp}}return{forkParentDepth:a.depth>0?a.depth-1:-1,headTimestamp:a.timestamp}}(e,a)}));n.sort((e,t)=>e.forkParentDepth!==t.forkParentDepth?t.forkParentDepth-e.forkParentDepth:t.headTimestamp-e.headTimestamp),r[R]&&(r[R].lane=0);let i=1;for(let e of n)r[e.branchName]&&(r[e.branchName].lane=i++);let s=new Set;if(r[R]&&a[r[R].headCommitId]){let e=r[R].headCommitId,t=[e],n=new Set([e]),i=0;for(;i<t.length;){let e=t[i++];a[e]&&(a[e]={...a[e],branchLane:0},s.add(e),a[e].parentIds.forEach(e=>{a[e]&&!n.has(e)&&(n.add(e),t.push(e))}))}}for(let e of Object.keys(r).sort((e,t)=>{var a,n,i,s;return(null!==(i=null===(a=r[e])||void 0===a?void 0:a.lane)&&void 0!==i?i:1/0)-(null!==(s=null===(n=r[t])||void 0===n?void 0:n.lane)&&void 0!==s?s:1/0)})){if(e===R)continue;let t=r[e];if(!t||!a[t.headCommitId])continue;let n=t.lane,i=[t.headCommitId],o=new Set([t.headCommitId]),d=0;for(;d<i.length;){let e=i[d++],t=a[e];!(!t||s.has(e))&&(a[e]={...t,branchLane:n},s.add(e),t.parentIds.forEach((e,d)=>{if(a[e]&&!o.has(e)){let a=!0;if(t.parentIds.length>1&&1===d){let t=Object.values(r).find(t=>t.headCommitId===e);t&&t.lane>n&&(a=!1)}a&&!s.has(e)&&(o.add(e),i.push(e))}}))}}return{updatedCommits:a,updatedBranches:r}}function z(){let{toast:e}=(0,P.dj)(),[t,a]=(0,n.useState)({}),[i,s]=(0,n.useState)({}),[o,d]=(0,n.useState)(null),[c,m]=(0,n.useState)(R),[h,u]=(0,n.useState)(0),[p,f]=(0,n.useState)(132),[x,g]=(0,n.useState)(1),[v,b]=(0,n.useState)(Date.now()),[j,C]=(0,n.useState)(!1),N=(0,n.useCallback)(()=>(b(e=>e+1),v),[v]);(0,n.useEffect)(()=>{let e={},t={},r=0,n=Date.now();b(n+1e3);let i=n,o=()=>++i,l=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{id:"commit-".concat(r++),parentIds:e,timestamp:o(),branchLane:t,depth:a,isCustom:n}},c=function(e,t,a,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.id,s=e.depth+1,o="";for(let e=0;e<t;e++){let e=l([i],a,s,n);r[e.id]=e,i=e.id,o=e.id,s++}return o},h=null,p=0,x=[];for(let t=0;t<10;t++){let t=l(h?[h]:[],0,p);e[t.id]=t,x.push(t.id),h=t.id,p++}t[R]={name:R,headCommitId:h,lane:0};let g=c(e[x[7]],5,1,e);t["139"]={name:"139",headCommitId:g,lane:1};let v=c(e[x[4]],4,2,e);t["136"]={name:"136",headCommitId:v,lane:2};let j=c(e[x[2]],3,3,e);t["134"]={name:"134",headCommitId:j,lane:3};let{updatedCommits:C,updatedBranches:N}=H(e,t);a(C),s(N),N[R]&&d(N[R].headCommitId),m(R),u(r);let y=Object.keys(N).map(e=>parseInt(e.split("-")[0],10)).filter(e=>!isNaN(e));f(Math.max(132,(y.length>0?Math.max(...y):131)+1))},[]);let y=(0,n.useCallback)((e,t,r)=>{let n={...t},i={...r},o=e(n,i),{updatedCommits:d,updatedBranches:l}=H(n,i);return a(d),s(l),o},[a,s]),w=(0,n.useCallback)(()=>{if(!c||!i[c]){e({title:"Error",description:"No branch selected to add commit.",variant:"destructive"});return}let r=i[c],n=t[r.headCommitId];if(!n){e({title:"Error",description:"Head commit of selected branch not found.",variant:"destructive"});return}let o="commit-".concat(h),l={id:o,parentIds:[n.id],timestamp:N(),branchLane:r.lane,depth:n.depth+1,isCustom:!1},{updatedCommits:m,updatedBranches:p}=H({...t,[o]:l},{...i,[r.name]:{...r,headCommitId:o}});a(m),s(p),d(o),u(e=>e+1),e({title:"Commit Added",description:"Commit ".concat(o," added to branch ").concat(r.name,".")})},[c,i,t,h,e,N]),I=(0,n.useCallback)(()=>{if(!o||!t[o]){e({title:"Error",description:"No commit selected to create branch from.",variant:"destructive"});return}let a=t[o],r=N(),n=y((e,t)=>{let n="".concat(p),i="commit-".concat(h),s={id:i,parentIds:[o],timestamp:r,branchLane:0,depth:a.depth+1,isCustom:!1};return e[i]=s,t[n]={name:n,headCommitId:i,lane:0},{newBranchName:n,newCommitId:i}},t,i);m(n.newBranchName),d(n.newCommitId),u(e=>e+1),f(e=>e+1),e({title:"Branch Created",description:"Branch ".concat(n.newBranchName," created with initial commit ").concat(n.newCommitId,". Layout updated.")})},[o,t,i,h,p,e,y,N]),k=(0,n.useCallback)(()=>{if(!o||!t[o]){e({title:"Error",description:"No commit selected to branch from for customisations.",variant:"destructive"});return}let a=t[o],r=[];for(let e=0;e<4;e++)r.push(N());let n=y((e,t)=>{let n="custom-".concat(x),i=o,s=a.depth,d="";for(let t=0;t<4;t++){let a="commit-".concat(h+t),n={id:a,parentIds:[i],timestamp:r[t],branchLane:0,depth:s+1,isCustom:!0};e[a]=n,i=a,s=n.depth,d=a}let l={name:n,headCommitId:d,lane:0};return t[n]=l,{newBranchName:n,headOfCustomCommits:d,updatedNextCommitIdx:h+4}},t,i);m(n.newBranchName),d(n.headOfCustomCommits),u(n.updatedNextCommitIdx),g(e=>e+1),e({title:"Customisations Applied",description:"Branch ".concat(n.newBranchName," created with 4 custom commits. Layout updated.")})},[o,t,i,h,x,e,y,N]),S=(0,n.useCallback)(e=>{d(e),j&&C(!1)},[j]),A=(0,n.useCallback)(e=>{m(e),i[e]&&d(i[e].headCommitId),C(!1)},[i]),D=(0,n.useCallback)(()=>{if(!o&&!j){e({title:"Error",description:"Select a commit to move first.",variant:"destructive"}),C(!1);return}C(e=>!e)},[o,j,e]),E=(0,n.useCallback)((a,r)=>{if(!t[a]||!t[r]){e({title:"Error",description:"Invalid commit for move operation.",variant:"destructive"}),C(!1);return}if(a===r){e({title:"Error",description:"Cannot move a commit onto itself.",variant:"destructive"}),C(!1);return}let n=!1,s=[a],o=new Set([a]),l=0;for(;l<s.length;){let e=s[l++];if(e===r){n=!0;break}Object.values(t).forEach(t=>{t.parentIds.includes(e)&&!o.has(t.id)&&(o.add(t.id),s.push(t.id))})}if(n){e({title:"Error",description:"Cannot move commit: creates a cycle.",variant:"destructive"}),C(!1);return}let c=N();y((e,t)=>{let n=e[a],i=e[r];e[a]={...n,parentIds:[r],depth:i.depth+1,timestamp:c};let s=[{commitId:a,newDepth:i.depth+1}],o=new Set([a]),d=0,l=1;for(;d<s.length;){let{commitId:t,newDepth:a}=s[d++];for(let r of Object.keys(e)){let n=e[r];if(n&&n.parentIds.includes(t)&&!o.has(r)){let t=c+l++;e[r]={...n,depth:a+1,timestamp:t},o.add(r),s.push({commitId:r,newDepth:a+1})}}}},t,i),C(!1),d(a),e({title:"Commit Moved",description:"Commit ".concat(a," re-parented. Layout updated.")})},[t,i,e,y,N]),M=(0,n.useCallback)(a=>{if(!c||!i[c]){e({title:"Error",description:"No target branch selected for merge.",variant:"destructive"});return}let r=i[c];if(!i[a]){e({title:"Error",description:"Source branch for merge not found.",variant:"destructive"});return}if(c===a){e({title:"Error",description:"Cannot merge a branch into itself.",variant:"destructive"});return}let n=i[a],s=t[r.headCommitId],o=t[n.headCommitId];if(!s||!o){e({title:"Error",description:"Head commit not found for one or both branches.",variant:"destructive"});return}let l=new Set,m=[];t[s.id]&&m.push(s.id);let p=0;for(;p<m.length;){let r=m[p++];if(l.has(r))continue;l.add(r);let n=t[r];if(n){if(n.id===o.id){e({title:"Already Merged",description:"Branch ".concat(a," is already an ancestor of ").concat(c,". No merge needed."),variant:"default"});return}n.parentIds.forEach(e=>{t[e]&&!l.has(e)&&m.push(e)})}}let f=N(),x=y((e,t)=>{let a="commit-".concat(h),n={id:a,parentIds:[s.id,o.id],timestamp:f,branchLane:t[r.name].lane,depth:Math.max(s.depth,o.depth)+1,isCustom:!1};return e[a]=n,t[r.name]={...t[r.name],headCommitId:a},{newCommitId:a}},t,i);d(x.newCommitId),u(e=>e+1),e({title:"Merge Successful",description:"Merge commit ".concat(x.newCommitId," created. Layout updated.")})},[c,i,t,h,e,y,N]),{positionedCommits:T,edges:O,graphWidth:B,graphHeight:_}=(0,n.useMemo)(()=>(function(e,t){let a=[],r=[],n={...e};if(0===Object.keys(n).length)return{positionedCommits:a,edges:r,graphWidth:100,graphHeight:100};let i=Object.values(n).sort((e,t)=>e.depth===t.depth?e.timestamp===t.timestamp?(e.branchLane||0)-(t.branchLane||0):e.timestamp-t.timestamp:e.depth-t.depth),s=0,o=0,d={};for(let e of i){let t=90*(e.branchLane||0)+50,r=60*e.depth+50,n={...e,x:t,y:r};a.push(n),d[e.id]=n,s=Math.max(s,t),o=Math.max(o,r)}for(let e of a)e.parentIds.forEach(t=>{let a=d[t];a&&r.push({from:e,to:a})});return{positionedCommits:a,edges:r,graphWidth:s+90,graphHeight:o+60}})(t,0),[t,i]);return(0,r.jsxs)("div",{className:"flex flex-col h-screen p-4 gap-4 bg-background text-foreground",children:[(0,r.jsx)("header",{className:"text-center py-2",children:(0,r.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary",children:"Git Simulator"})}),(0,r.jsx)(L,{selectedBranchName:c,selectedCommitId:o,commits:t,branches:i,onAddCommit:w,onCreateBranch:I,onMoveCommit:E,onMergeBranch:M,onAddCustomCommits:k,isMoveModeActive:j,toggleMoveMode:D}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)(l,{commits:t,branches:i,positionedCommits:T,edges:O,selectedCommitId:o,selectedBranchName:c,onCommitSelect:S,onBranchSelect:A,onCommitDrop:E,height:Math.max(_,400),width:Math.max(B,600)})}),(0,r.jsx)("footer",{className:"text-center text-sm text-muted-foreground py-2",children:(0,r.jsx)("p",{children:"Interactive Git simulation. Select commits and branches to perform actions. You can drag commits to re-parent them."})})]})}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>h});var r=a(2115);let n=0,i=new Map,s=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?s(a):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function m(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function h(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2596),n=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[807,843,441,684,358],()=>t(233)),_N_E=e.O()}]);